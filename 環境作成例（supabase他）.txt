ç’°å¢ƒæ§‹ç¯‰ã€€Vercel+supabase(PosgreSQL)
ï¼‘ï¼Superbaseã¨Vercelé€£æº
ã€€â‘ ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆï¼šhttps://supabase.com
   Sing Upã§Githubã§OK
  â†’ãƒ­ã‚°ã‚¤ãƒ³å¾Œãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒˆã«å…¥ã‚‹
ã€€ã€€https://supabase.com/dashboard/
ã€€â‘¡æ–°è¦PJä½œæˆ
ã€€ã€€ãƒ»ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã®NewProjectãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
ã€€ã€€ãƒ»Project Nameï¼ˆä¾‹ï¼šmy-game.dbï¼‰ã‚’å…¥åŠ›
ã€€ã€€ãƒ»Organizationï¼ˆå€‹äººã®å ´åˆï¼šPersonalï¼‰ã€Regionï¼šæ—¥æœ¬
ã€€ã€€ãƒ»Database passwordã‚’è¨­å®š
ã€€ã€€ï¼ˆå¾Œã§DATABASE_URLã‚’çµ„ã¿ç«‹ã¦ã‚‹æ™‚ã«ä½¿ç”¨ã€æ³¨æ„ï¼š@ã‚’ä½¿ã£ãŸãŸã‚â†’%40ã§å¤‰æ›å¿…è¦ã ã£ãŸï¼‰
ã€€ã€€ãƒ»Start new projectã‚’æŠ¼ä¸‹ã—ã¦ä½œæˆ
ã€€â‘¢æ¥ç¶šæƒ…å ±ã®å–å¾—
ã€€ã€€ãƒ»ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç”»é¢ã«ç§»å‹•
ã€€ã€€ãƒ»å·¦ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®Project Setting>Databaseã‚’é–‹ã
ã€€ã€€ãƒ»Connection stringæ¬„ã«ã‚ã‚‹URLã‚’ã‚³ãƒ”ãƒ¼ï¼ˆå¾Œã§ä½¿ã†ï¼‰
ã€€ã€€ã€€ä¾‹ï¼‰postgres:/postgres:YOURï¼¿PASSWORD@db.YOUR_REGION.supabase.co:5432/postgres
  â‘£ãƒ†ãƒ¼ãƒ–ãƒ«ã®æº–å‚™
  ã€€ãƒ»å·¦ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®Table Editorã‚’é–‹ãã€New Table
  https://supabase.com/dashboard/project/fktghkvzcxuaoyoisbez/editor/17268
    ãƒ»ãƒ†ãƒ¼ãƒ–ãƒ«åã‚’page_viewsã€ä¸»ã‚­ãƒ¼åˆ—ã‚’game(type:text)
    ãƒ»åˆ—ã‚’è¿½åŠ ï¼šcountï¼ˆtype:int8,default:0ï¼‰
    ãƒ»saveã—ã¦ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ä½œæˆ
  
  â‘¤Vercelã«ç’°å¢ƒå¤‰æ•°ã‚’ç™»éŒ²
  https://vercel.com/keisukeharas-projects
  ã€€ãƒ»Vercelãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã§è©²å½“ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’é–‹ã
  ã€€ãƒ»Settingsï¼Environment Variablesã‚’é¸æŠ
  ã€€ãƒ»ä¸‹è¨˜è¨­å®šï¼ˆKye-valueï¼‰
  ã€€ã€€Key:SUPABASE_URL
  ã€€ã€€Value:https://YOUR_REGION.supabase.co
      Key:SUPABASE_KEY
      Value:
      ã€€ï¼‘ï¼ãƒ•ãƒ­ãƒ³ãƒˆã‹ã‚‰ç›´æ¥ãŸãŸãï¼šanonï¼ˆã‚³ãƒ”ãƒ¼ã—ãŸã‚‚ã®ï¼‰ã‚’ä½¿ã†
      ã€€ï¼’ï¼ã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹é–¢æ•°ãªã©ã§ä¿¡é ¼ã§ãã‚‹ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‹ã‚‰ã‚¢ã‚¯ã‚»ã‚¹ï¼šservice_roleã®ã‚­ãƒ¼
      ã€€ã€€â˜…ä»Šå›ã¯2ç•ª
      Key:DATABASE_URLï¼ˆå¿…è¦ãªã‚‰ï¼‰
  ã€€ã€€Value:å…ˆã»ã©ã®Connection stringã‚’å¼µã‚Šä»˜ã‘ã‚‹
  ã€€â‘¥å‹•ä½œç¢ºèª
  ã€€ã€€ãƒ»ãƒ­ãƒ¼ã‚«ãƒ«ã§ã€vercel devã‚’å®Ÿè¡Œ

  ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼å†åº¦ã¾ã¨ã‚ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼
  Supabase ã¨ Vercelã€Vue 3 ã‚’ã¤ãªãåˆã‚ã›ã¦ã€Œãƒšãƒ¼ã‚¸ãƒ“ãƒ¥ãƒ¼ï¼ã„ã„ã­æ•°ã‚’ã‚¯ãƒ©ã‚¦ãƒ‰ DB ã«ä¿å­˜ï¼†å–å¾—ã€
  ã™ã‚‹ã¾ã§ã®å…¨ä½“æ‰‹é †ã‚’ã€ç’°å¢ƒè¨­å®šã‚„å¿…è¦ã‚³ãƒãƒ³ãƒ‰ã‚‚å«ã‚ã¦æ™‚ç³»åˆ—é †ã«ã¾ã¨ã‚ã¾ã—ãŸã€‚
  é•·ããªã‚Šã¾ã™ãŒã€é †ç•ªã«è¿½ã£ã¦ã„ã‘ã°å†ç¾ã§ãã‚‹ã¯ãšã§ã™ã€‚

å‰æ
ã™ã§ã« GitHub ãƒªãƒã‚¸ãƒˆãƒªï¼ˆä¾‹ï¼štoppageï¼‰ã‚’æŒã£ã¦ã„ã¦ã€ãã“ã« Vue 3 + Vite ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãŒã‚ã‚‹
Vercel ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ä½œæˆæ¸ˆã¿
Supabase ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ä½œæˆæ¸ˆã¿
ä»¥é™ã®ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ãƒ»ãƒ‰ãƒ¡ã‚¤ãƒ³åãƒ»ã‚­ãƒ¼å€¤ã¯è‡ªåˆ†ã®ç’°å¢ƒã«èª­ã¿æ›¿ãˆã¦ãã ã•ã„ã€‚

[1]Supabase å´ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
1.1 Supabase ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã§æ–°è¦ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆ
https://app.supabase.com ã«ãƒ­ã‚°ã‚¤ãƒ³
â€œNew projectâ€ â†’ã€€Project nameï¼šå¥½ããªåå‰ï¼ˆä¾‹ï¼štoppage-statsï¼‰
Organizationï¼Region ã‚’é¸æŠ
Database passwordï¼šä»»æ„ï¼ˆä¾‹ï¼š@tako123desuï¼‰
ã€ŒCreate new projectã€ã‚’æŠ¼ã—ã€æ•°åˆ†å¾…ã¤

1.2 ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ãƒ†ãƒ¼ãƒ–ãƒ«å®šç¾©
ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç”»é¢ã®å·¦ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‹ã‚‰ Table Editor ã‚’é–‹ã
â€œNew Tableâ€ ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã€ä¸‹è¨˜ã‚¹ã‚­ãƒ¼ãƒã§ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ä½œæˆ
ãƒ†ãƒ¼ãƒ–ãƒ«åï¼špage_views
ã‚«ãƒ©ãƒ ï¼š
ã€€game â€“ type: text (ä¸»ã‚­ãƒ¼)
ã€€count â€“ type: bigint (ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ 0)
ã€€ä¿å­˜ã—ã¦ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ä½œæˆ
ã€€ï¼ˆå¿…è¦ã«å¿œã˜ã¦ï¼‰â€œNew Tableâ€ ã§ user_actions ã®ã‚ˆã†ãªåˆ¥ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ä½œã‚‹å ´åˆã‚‚åŒæ§˜ã«è¡Œã†

1.3 Supabase ã® API æ¥ç¶šæƒ…å ±å–å¾—
å·¦ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã® Settings > API ã‚’é–‹ã
â€œProject URLâ€ æ¬„ï¼šhttps://<ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆRef>.supabase.co ã¨ã„ã†å½¢å¼ã® URL ã‚’ã‚³ãƒ”ãƒ¼
â€œProject API keysâ€ æ¬„ï¼š
ã€€anon publicï¼ˆã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå‘ã‘ã‚­ãƒ¼ï¼‰
ã€€service_roleï¼ˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰å‘ã‘ï¼é«˜æ¨©é™ã‚­ãƒ¼ï¼‰
ã€€ã®ã©ã¡ã‚‰ã‹ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ãŠãï¼ˆä»Šå›ã¯ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‹ã‚‰æ›¸ãè¾¼ã¿ã‚’è¡Œã†ã®ã§ service_role æ¨å¥¨ï¼‰

1.4 Row Level Security (RLS) ãƒãƒªã‚·ãƒ¼ç¢ºèª
åˆæœŸçŠ¶æ…‹ã§ã¯ãƒ†ãƒ¼ãƒ–ãƒ«ã«å¯¾ã—ã¦ RLS ã¯ã‚ªãƒ•ã«ãªã£ã¦ã„ã‚‹ã¯ãšã§ã™ãŒã€ã‚‚ã—ã‚ªãƒ³ã«ãªã£ã¦ã„ã‚Œã°ã€
Table Editor > Policies ã‹ã‚‰ã€ŒEnable RLSã€ã‚’ã‚ªãƒ•ã€ã¾ãŸã¯ Insert/Update ãŒè¨±å¯ã•ã‚Œã‚‹ã‚ˆã†
ãƒ«ãƒ¼ãƒ«ã‚’è¿½åŠ ã—ã¦ãã ã•ã„ã€‚

[2] ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºç’°å¢ƒã®æº–å‚™
ä»¥ä¸‹ã®ä½œæ¥­ã¯ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ï¼ˆPowerShell ãªã©ï¼‰ã‚’ä½¿ã£ã¦ã€
ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆï¼ˆpackage.jsonï¼vite.config.ts ãŒã‚ã‚‹å ´æ‰€ï¼‰ã§è¡Œã£ã¦ãã ã•ã„ã€‚

2.1 ä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆã«ç§»å‹•
cd /path/to/toppage
# â‘  Supabase ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
npm install @supabase/supabase-js
# â‘¡ Axiosï¼ˆVue ã‹ã‚‰ API ã‚’å©ãç”¨ï¼‰
npm install axios
# â‘¢ TypeScript å‹å®šç¾©ï¼ˆnode, Vercel handler ç”¨ï¼‰
npm install --save-dev @types/node @vercel/node
# â‘£ gh-pagesï¼ˆGitHub Pages ã«ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹å ´åˆï¼‰
npm install --save-dev gh-pages

2.2 TypeScript è¨­å®šï¼ˆã‚‚ã—ã¾ã ãªã‚‰ï¼‰
ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆã« tsconfig.json ã‚’ç”¨æ„ï¼ˆã™ã§ã«ã‚ã‚Œã°ä¸è¦ï¼‰ã€‚ä»¥ä¸‹ã¯æœ€ä½é™ã®ä¾‹ã§ã™ã€‚
{
  "compilerOptions": {
    "target": "esnext",
    "module": "esnext",
    "moduleResolution": "node",
    "strict": true,
    "jsx": "preserve",
    "sourceMap": true,
    "resolveJsonModule": true,
    "esModuleInterop": true,
    "lib": ["esnext", "dom"],
    "skipLibCheck": true,
    "baseUrl": ".",
    "paths": { "@/*": ["src/*"] }
  },
  "include": ["src", "api"]
}

2.3 Vite è¨­å®šã®ç¢ºèª
vite.config.tsï¼ˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆï¼‰ã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«ä¿®æ­£ï¼ç”¨æ„ã—ã¦ãŠãã¾ã™ã€‚
é–‹ç™ºï¼ˆãƒ­ãƒ¼ã‚«ãƒ«/Vercel Previewï¼‰: base: "/"
æœ¬ç•ªï¼ˆGitHub Pagesï¼‰: --base /toppage/ ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§åˆ‡ã‚Šæ›¿ãˆ

// vite.config.ts
import { defineConfig } from 'vite'
import vue from '@vitejs/plugin-vue'
import path from 'path'

export default defineConfig({
  base: "/",                // ãƒ­ãƒ¼ã‚«ãƒ«/Vercel Preview ç”¨
  plugins: [vue()],
  resolve: {
    alias: { "@": path.resolve(__dirname, "src") }
  }
})

[3] vercel.json ã®ä½œæˆ
ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆã« vercel.json ã‚’ç½®ã„ã¦ã€Vercel CLI ã«ã€Œã©ã®ã‚³ãƒãƒ³ãƒ‰ã§èµ·å‹•ã™ã‚‹ã‹ã€
ã€Œã©ã“ã«é–¢æ•°ãŒã‚ã‚‹ã‹ã€ã‚’ä¼ãˆã¾ã™ã€‚å¿…ãšã‚³ãƒ¡ãƒ³ãƒˆã‚„æœ«å°¾ã‚«ãƒ³ãƒã‚’å…¥ã‚Œãšã€
ãã®ã¾ã¾ã® JSON ã¨ã—ã¦ä¿å­˜ã—ã¦ãã ã•ã„ã€‚

{
  "version": 2,
  "builds": [
    {
      "src": "package.json",
      "use": "@vercel/static-build",
      "config": { "distDir": "dist" }
    },
    {
      "src": "api/**/*.ts",
      "use": "@vercel/node"
    }
  ],
  "routes": [
    {
      "src": "/api/(.*)",
      "dest": "/api/$1.ts"
    },
    {
      "handle": "filesystem"
    },
    {
      "src": "/(.*)",
      "dest": "/index.html"
    }
  ],
  "devCommand": "npm run dev"
}

builds
 src: "package.json" â†’ ãƒ“ãƒ«ãƒ‰ã‚³ãƒãƒ³ãƒ‰ã¯ npm run buildï¼ˆå¾Œè¿°ï¼‰
 src: "api/**/*.ts" â†’ ã‚µãƒ¼ãƒãƒ¬ã‚¹é–¢æ•°ã¯ api/ ãƒ•ã‚©ãƒ«ãƒ€ãƒ¼å†…ã® .ts ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½¿ã†

routes
 /api/* ã¯ api/*.ts ã«ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°
 é™çš„ãƒ•ã‚¡ã‚¤ãƒ« â†’ å­˜åœ¨ãƒã‚§ãƒƒã‚¯
 ãã‚Œä»¥å¤– â†’ SPA ã® index.html

devCommand
 npm run dev ã‚’å®Ÿè¡Œã—ã¦ Vite ã®é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã‚’èµ·å‹•ï¼ˆvercel dev å®Ÿè¡Œæ™‚ã«ä½¿ã‚ã‚Œã‚‹ï¼‰

[4] ç’°å¢ƒå¤‰æ•° (.env) ã®æº–å‚™

4.1 Vercel CLI ã‹ã‚‰ Pull

# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆã§
npx vercel env pull .env
ã“ã‚Œã«ã‚ˆã‚Šã€Vercel ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã«ç™»éŒ²ã•ã‚Œã¦ã„ã‚‹ä»¥ä¸‹ã®ç’°å¢ƒå¤‰æ•°ãŒãƒ­ãƒ¼ã‚«ãƒ«ã« .env ã¨ã—ã¦
ã‚³ãƒ”ãƒ¼ã•ã‚Œã¾ã™ã€‚

SUPABASE_URL : Supabase ã® Project URL (https://<ref>.supabase.co)
SUPABASE_KEY : Supabase ã® Service Role ã‚­ãƒ¼ï¼ˆã¾ãŸã¯ anon ã‚­ãƒ¼ï¼‰
DATABASE_URL : PostgreSQL ã®æ¥ç¶šæ–‡å­—åˆ—ï¼ˆSupabaseã§ã¯åŸºæœ¬ä¸è¦ï¼‰
VERCEL_OIDC_TOKEN : Vercel ç”¨ã® OIDC ãƒˆãƒ¼ã‚¯ãƒ³ï¼ˆé–‹ç™ºç”¨ãƒ»è‡ªå‹•ç”Ÿæˆï¼‰

4.2 ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚„ç‰¹æ®Šæ–‡å­—ã® URL ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰

.env å†…ã® DATABASE_URL ã«å«ã‚€ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã« @ ã‚„ : ãŒã‚ã‚‹å ´åˆã¯ã€å¿…ãš URL ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ï¼ˆä¾‹ï¼š@â†’%40ï¼‰ã€‚

ä¾‹ï¼š
DATABASE_URL="postgresql://postgres:%40tako123@db.fktghkvzcxuaoyoisbez.supabase.co:5432/postgres"
SUPABASE_URL="https://fktghkvzcxuaoyoisbez.supabase.co"
SUPABASE_KEY="ï¼ˆservice_role ã‚­ãƒ¼ï¼‰"

4.3 .env ã®ç¢ºèª
VSCode ãªã©ã§é–‹ãã€ä¸‹è¨˜ï¼“ã¤ã‚’æœ€ä½é™æŒã£ã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºã‹ã‚ã¾ã™ã€‚

SUPABASE_URL="https://<your-ref>.supabase.co"
SUPABASE_KEY="<your-service-role-key>"
DATABASE_URL="postgresql://postgres:%40tako123@db.<your-ref>.supabase.co:5432/postgres"


[5] ã‚µãƒ¼ãƒãƒ¬ã‚¹é–¢æ•°ã®å®Ÿè£…
5.1. api/track.ts ï¼ˆãƒšãƒ¼ã‚¸ãƒ“ãƒ¥ãƒ¼ã‚’ã‚«ã‚¦ãƒ³ãƒˆã‚¢ãƒƒãƒ—ï¼‰

// api/track.ts
import { createClient } from '@supabase/supabase-js';

// ç’°å¢ƒå¤‰æ•°ã‚’ä½¿ã£ã¦ Supabase ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’åˆæœŸåŒ–
const supabase = createClient(
  process.env.SUPABASE_URL!,
  process.env.SUPABASE_KEY!
);

export default async function handler(req: any, res: any) {
  try {
    // ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ game ã‚’å–å¾—
    const game = String(req.query.game || '');

    // 1) ç¾åœ¨ã® count ã‚’å–å¾—
    const { data, error: selErr } = await supabase
      .from('page_views')
      .select('count')
      .eq('game', game)
      .single();

    if (selErr && selErr.code !== 'PGRST116') {
      console.error('Select error:', selErr);
      return res.status(500).json({ error: selErr.message });
    }

    // 2) count ã‚’ +1ï¼ˆå­˜åœ¨ã—ãªã‘ã‚Œã° 0 + 1ï¼‰
    const newCount = (data?.count ?? 0) + 1;

    // 3) upsert ã§æŒ¿å…¥ã¾ãŸã¯æ›´æ–°
    const { error: upErr } = await supabase
      .from('page_views')
      .upsert({ game, count: newCount }, { onConflict: 'game' });

    if (upErr) {
      console.error('Upsert error:', upErr);
      return res.status(500).json({ error: upErr.message });
    }

    return res.status(200).json({ ok: true });
  } catch (e: any) {
    console.error('Handler exception:', e);
    return res.status(500).json({ error: e.message });
  }
}

5.2. api/like.ts ï¼ˆã„ã„ã­ã‚’ã‚«ã‚¦ãƒ³ãƒˆã‚¢ãƒƒãƒ—ã—ã¦æ–°å€¤ã‚’è¿”ã™ï¼‰

// api/like.ts
import { createClient } from '@supabase/supabase-js';

const supabase = createClient(
  process.env.SUPABASE_URL!,
  process.env.SUPABASE_KEY!
);

export default async function handler(req: any, res: any) {
  try {
    const game = String(req.query.game || '');

    // 1) ç¾åœ¨ã® count ã‚’å–å¾—
    const { data, error: selErr } = await supabase
      .from('page_views')
      .select('count')
      .eq('game', game)
      .single();

    if (selErr && selErr.code !== 'PGRST116') {
      console.error('Select error:', selErr);
      return res.status(500).json({ error: selErr.message });
    }

    // 2) æ–°ã—ã„ count ã‚’è¨ˆç®—
    const current = data?.count ?? 0;
    const newCount = current + 1;

    // 3) upsert ã—ã¦æ–°ã—ã„ count ã‚’ä¿å­˜
    const { error: upErr } = await supabase
      .from('page_views')
      .upsert({ game, count: newCount }, { onConflict: 'game' });

    if (upErr) {
      console.error('Upsert error:', upErr);
      return res.status(500).json({ error: upErr.message });
    }

    // 4) ãƒ•ãƒ­ãƒ³ãƒˆã«æ–°ã—ã„å€¤ã‚’è¿”ã™
    return res.status(200).json({ ok: true, count: newCount });
  } catch (e: any) {
    console.error('Handler exception:', e);
    return res.status(500).json({ error: e.message });
  }
}

ãƒã‚¤ãƒ³ãƒˆ
 req: any, res: any ã«ã—ã¦å‹ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆã‚’çœç•¥
 upsert({ game, count: newCount }, { onConflict: 'game' }) ã§å­˜åœ¨ãƒã‚§ãƒƒã‚¯+æ›´æ–°

[6] Vue 3 ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®å®Ÿè£…
6.1. GameStats.vueï¼ˆã‚¢ã‚¯ã‚»ã‚¹æ•°ãƒ»ã„ã„ã­æ•°ã‚’è¡¨ç¤ºãƒ»æ›´æ–°ã™ã‚‹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ä½œæˆï¼‰
src/components/GameStats.vue ã‚’æ–°è¦ä½œæˆã—ã€ä»¥ä¸‹ã‚’è²¼ã‚Šä»˜ã‘ã¾ã™ã€‚

<template>
  <div class="stats">
    <!-- ãƒšãƒ¼ã‚¸ãƒ“ãƒ¥ãƒ¼æ•°ã¯ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°ç›´å¾Œã«å†å–å¾—ã™ã‚‹å ´åˆã¯åˆ¥ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆãŒå¿…è¦ -->
    <span>ğŸ‘â€ğŸ—¨ {{ views }}</span>
    <button @click="onLike">ğŸ‘ {{ likes }}</button>
  </div>
</template>

<script lang="ts" setup>
import { ref, onMounted } from 'vue'
import axios from 'axios'

const props = defineProps<{ gameId: string }>()

const views = ref(0)
const likes = ref(0)

onMounted(async () => {
  // 1) ãƒšãƒ¼ã‚¸ãƒ“ãƒ¥ãƒ¼ã‚’ã‚«ã‚¦ãƒ³ãƒˆã‚¢ãƒƒãƒ—ã™ã‚‹
  await axios.get('/api/track', { params: { game: props.gameId } })

  // 2) æœ€æ–°ã®ãƒ“ãƒ¥ãƒ¼æ•°ã‚’å–å¾—ã™ã‚‹ãŸã‚ã®ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆï¼ˆget-countï¼‰ã‚’ä½œã£ã¦ã„ã‚Œã°ä»¥ä¸‹ã®ã‚ˆã†ã«å–å¾—
  // const { data } = await axios.get('/api/get-count', { params: { game: props.gameId } })
  // views.value = data.count

  // ä»Šå›ã¯ upsert å¾Œã«å†ãƒ•ã‚§ãƒƒãƒã—ãªã„å ´åˆã€å˜ã« +1 è¡¨ç¤ºã—ã¦ãŠã
  views.value++
})

async function onLike() {
  // ã‚¯ãƒªãƒƒã‚¯ã”ã¨ã«ã„ã„ã­ã‚’ã‚«ã‚¦ãƒ³ãƒˆã‚¢ãƒƒãƒ—
  const { data } = await axios.get('/api/like', { params: { game: props.gameId } })
  if (data.ok) {
    likes.value = data.count
  }
}
</script>

<style scoped>
.stats {
  display: flex;
  gap: 1rem;
  align-items: center;
  margin-top: 0.5rem;
}
button {
  background: none;
  border: none;
  cursor: pointer;
}
</style>

è£œè¶³:
 ä»Šå›ã¯ã€Œãƒ“ãƒ¥ãƒ¼æ•°ã‚’ upsert ã§æ›´æ–°ã—ãŸã‚‰ãƒ­ãƒ¼ã‚«ãƒ«ã§ views.value++ã€ã¨ã„ã†ç°¡æ˜“è¡¨ç¤ºã«ã—ã¦ã„ã¾ã™ãŒã€
 ã‚ˆã‚Šæ­£ç¢ºã«ã€Œæœ€æ–°å€¤ã‚’å–å¾—ã—ãŸã„ã€å ´åˆã¯ /api/get-count ã®ã‚ˆã†ãªã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’ç”¨æ„ã—ã€
 select('count') ã‚’è¡Œã£ã¦ãã‚‹ã®ãŒãŠã™ã™ã‚ã§ã™ã€‚

6.2. GameList.vue ã®æ›´æ–°
æ—¢å­˜ã® src/components/GameList.vue ã«ã€å…ˆã»ã©ã® GameStats.vue ã‚’çµ„ã¿è¾¼ã¿ã¾ã™ã€‚

<!-- src/components/GameList.vue -->
<template>
  <div class="game-list">
    <div
      v-for="game in games"
      :key="game.id"
      class="game-item"
    >
      <!-- æ—¢å­˜ã®ã‚²ãƒ¼ãƒ æƒ…å ±ã‚’è¡¨ç¤ºã™ã‚‹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ -->
      <GameItem :game="game" />

      <!-- è¿½åŠ ï¼šãƒšãƒ¼ã‚¸ãƒ“ãƒ¥ãƒ¼&ã„ã„ã­æ•° -->
      <GameStats :gameId="game.id" />
    </div>
  </div>
</template>

<script lang="ts" setup>
import { defineProps } from 'vue'
import type { GameInfo } from '@/data/games'
import GameItem from '@/components/GameItem.vue'
import GameStats from '@/components/GameStats.vue'

const { games } = defineProps<{ games: GameInfo[] }>()
</script>

<style scoped>
.game-list {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 1rem;
  padding: 0;
  margin: 0;
}
.game-item {
  transition: transform 0.2s ease, box-shadow 0.2s ease;
  padding: 1rem;
  background: #fff;
  border-radius: 8px;
}
.game-item:hover {
  transform: translateY(-4px) scale(1.02);
  box-shadow: 0 8px 16px rgba(0, 0, 0, 0.15);
}

/* ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œ */
@media (max-width: 1024px) {
  .game-list {
    grid-template-columns: repeat(3, 1fr);
  }
}
@media (max-width: 768px) {
  .game-list {
    grid-template-columns: repeat(2, 1fr);
  }
}
@media (max-width: 480px) {
  .game-list {
    grid-template-columns: 1fr;
  }
}
</style>

GameStats ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¦ <GameStats :gameId="game.id" /> ã‚’æŒ¿å…¥ã™ã‚‹ã“ã¨ã§ã€
å„ã‚²ãƒ¼ãƒ ã‚«ãƒ¼ãƒ‰ã«ã‚«ã‚¦ãƒ³ãƒˆã‚’è¡¨ç¤ºã—ã¾ã™ã€‚

[7] Vue 3 æœ¬ä½“ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
src/App.vue ã‚„ãƒ«ãƒ¼ã‚¿ãƒ¼è¨­å®šãŒã¾ã ã¨ã„ã†å ´åˆã¯ã€æœ€ä½é™ä»¥ä¸‹ã‚’æº–å‚™ã—ã¾ã™ã€‚

7.1 src/App.vueï¼ˆæ—¢å­˜ã®ã¾ã¾ä½¿ã†ï¼‰
æ—¢ã«ä½œæˆæ¸ˆã¿ãªã‚‰ãã®ã¾ã¾ã€‚ä¾‹ã¨ã—ã¦ã¯ï¼š

<template>
  <div id="app">
    <Header />
    <main>
      <GameList :games="games" />
    </main>
    <Footer />
  </div>
</template>

<script lang="ts" setup>
import Header from '@/components/Header.vue'
import Footer from '@/components/Footer.vue'
import GameList from '@/components/GameList.vue'
import { games } from '@/data/games'
</script>

<style>
main {
  padding: 2rem;
}
</style>

7.2. ãƒ«ãƒ¼ã‚¿ãƒ¼ã®è¨­å®šï¼ˆä»»æ„ï¼‰
ç”»é¢é·ç§»ãŒå¿…è¦ãªå ´åˆã¯ã€vue-router ã‚’ä½¿ã£ã¦ game/:id ã®ã‚ˆã†ãªãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚’ä½œã‚Šã¾ã™ã€‚
ä»Šå›ã¯çœç•¥ã—ã¦ã€å˜ä¸€ãƒšãƒ¼ã‚¸å†…ã§ GameStats ã‚’ä½¿ã†å½¢ã§ã‚‚å•é¡Œã‚ã‚Šã¾ã›ã‚“ã€‚

[8] GitHub Pages ã¸ã®ãƒ‡ãƒ—ãƒ­ã‚¤è¨­å®šï¼ˆä»»æ„ï¼‰
ã€ŒGitHub Pages ã§é™çš„ãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°ã€ã‚‚ä½¿ã„ãŸã„å ´åˆã¯ä»¥ä¸‹ã‚’åˆã‚ã›ã¦ãŠãã¨ä¾¿åˆ©ã§ã™ã€‚
â€» Vercel ã«ä¸€æœ¬åŒ–ã—ãŸã„å ´åˆã¯ã“ã®ã‚¹ãƒ†ãƒƒãƒ—ã¯ä¸è¦ã§ã™ã€‚

8.1 vite.config.ts ã®ãƒ™ãƒ¼ã‚¹è¨­å®šã‚’åˆ‡ã‚Šæ›¿ãˆ
æœ¬ç•ªãƒ“ãƒ«ãƒ‰æ™‚ã ã‘ --base /toppage/ ã‚’æ¸¡ã—ã¦ç”Ÿæˆã•ã‚Œã‚‹ã‚ˆã†ã«ã™ã‚‹ã€‚

8.2 package.json ã«ãƒ‡ãƒ—ãƒ­ã‚¤ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’è¿½åŠ 

{
  "scripts": {
    "dev": "vite",
    "build": "vue-tsc -b && vite build",                                // Vercel/ãƒ­ãƒ¼ã‚«ãƒ«ç”¨
    "build:gh": "vue-tsc -b && vite build --base /toppage/",             // GitHub Pages ç”¨
    "preview": "vite preview",
    "predeploy": "npm run build:gh",                                     // gh-pages ãƒ‡ãƒ—ãƒ­ã‚¤å‰ã«å®Ÿè¡Œ
    "deploy": "gh-pages -d dist"
  }
}


8.3 gh-pages ãƒ–ãƒ©ãƒ³ãƒã¸ã®ãƒ‡ãƒ—ãƒ­ã‚¤
 npm run deploy

ã“ã‚Œã§ gh-pages ãƒ–ãƒ©ãƒ³ãƒã« dist/ ã®ä¸­èº«ãŒè‡ªå‹•ã§ push ã•ã‚Œã€
https://<GitHubãƒ¦ãƒ¼ã‚¶ãƒ¼å>.github.io/toppage/ ã§å…¬é–‹ã•ã‚Œã‚‹

[9] ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºã¨å‹•ä½œç¢ºèª
9.1 ãƒ­ãƒ¼ã‚«ãƒ«ã§ vercel dev ã‚’å®Ÿè¡Œ â†’ Vite é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ï¼†API ãŒåŒæ™‚èµ·å‹•
 npx vercel dev

ãƒ­ã‚°ã« Functions served from api/ ã¨ Static files served from dist/ ãŒå‡ºã‚Œã° OK
ãƒ–ãƒ©ã‚¦ã‚¶ã§ http://localhost:3000/ ã‚’é–‹ãã¨ Vue ã‚¢ãƒ—ãƒªãŒç«‹ã¡ä¸ŠãŒã‚‹

9.2 API ãƒ†ã‚¹ãƒˆï¼ˆPowerShellï¼ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ï¼‰
# ãƒšãƒ¼ã‚¸ãƒ“ãƒ¥ãƒ¼ã‚’ 1 å¢—åŠ 
curl http://localhost:3000/api/track?game=test-page

# ã„ã„ã­ã‚’ 1 å¢—åŠ ã—ã€æ–°å€¤ã‚’ JSON ã§è¿”ã™
curl http://localhost:3000/api/like?game=test-page

9.3 Supabase ã§ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ç¢ºèª
https://app.supabase.com â†’ è©²å½“ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ â†’ Table Editor â†’ page_views
game='test-page' ã®ãƒ¬ã‚³ãƒ¼ãƒ‰ãŒã‚ã‚Šã€count ãŒå¢—ãˆã¦ã„ã‚‹ã‹è¦‹ã‚‹

9.4 Vue ã‚¢ãƒ—ãƒªä¸Šã‹ã‚‰å‹•ä½œç¢ºèª
ãƒ–ãƒ©ã‚¦ã‚¶ã§ http://localhost:3000/ ã‚’é–‹ãã€
å„ã‚²ãƒ¼ãƒ ã‚«ãƒ¼ãƒ‰ã®ä¸‹ã« ğŸ‘â€ğŸ—¨ï¼ˆãƒšãƒ¼ã‚¸ãƒ“ãƒ¥ãƒ¼æ•°ï¼‰ã¨ ğŸ‘ï¼ˆã„ã„ã­æ•°ï¼‰ãŒè¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹ã“ã¨

ã€ŒğŸ‘ã€ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ã‚«ã‚¦ãƒ³ãƒˆãŒå¢—ãˆã¦æ•°å€¤ãŒæ›´æ–°ã•ã‚Œã‚‹ã“ã¨

[10] Vercel ã«ãƒªãƒ¢ãƒ¼ãƒˆãƒ‡ãƒ—ãƒ­ã‚¤
10.1 å¤‰æ›´ã‚’ Git ã‚³ãƒŸãƒƒãƒˆ & GitHub ã¸ãƒ—ãƒƒã‚·ãƒ¥

 git add .
 git commit -m "Add Supabase/Vercel integration and GameStats component"
 git push origin <your-branch>

10.2 Vercel ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã‹ã‚‰ Previewï¼Production ã‚’ç¢ºèª
 Vercel ãŒè‡ªå‹•æ¤œå‡ºã—ã¦ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’ä½œæˆ
 (Production ã‚’æ›´æ–°ã™ã‚‹å ´åˆã¯ main ãƒ–ãƒ©ãƒ³ãƒã«ãƒãƒ¼ã‚¸)
 ãƒ–ãƒ©ã‚¦ã‚¶ã§ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ URL ã‚’é–‹ãã€ãƒ­ãƒ¼ã‚«ãƒ«ã¨åŒã˜ã‚ˆã†ã« ğŸ‘â€ğŸ—¨ ã¨ ğŸ‘ ãŒå‹•ä½œã™ã‚‹ã‹ç¢ºèª

[11] ã‚³ãƒãƒ³ãƒ‰ãƒªã‚¹ãƒˆã¾ã¨ã‚
# 1. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆã¸ç§»å‹•
 cd /path/to/toppage
# 2. ä¾å­˜ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
 npm install @supabase/supabase-js axios
 npm install --save-dev @types/node @vercel/node gh-pages
# 3. ç’°å¢ƒå¤‰æ•°ã® Pullï¼ˆVercel ã«ç™»éŒ²æ¸ˆã¿ã®å€¤ã‚’ .env ã«å–ã‚Šè¾¼ã‚€ï¼‰
 npx vercel env pull .env
# 4. Vercel ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•
 npx vercel dev
# 5. API ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã®å‹•ä½œãƒ†ã‚¹ãƒˆ
 curl http://localhost:3000/api/track?game=test-page
 curl http://localhost:3000/api/like?game=test-page
# ï¼ˆå¿…è¦ã‚ã‚Œã°ï¼‰6. GitHub Pages ã¸ã®é™çš„ã‚µã‚¤ãƒˆãƒ‡ãƒ—ãƒ­ã‚¤
 npm run deploy
# 7. Git ã§ã‚³ãƒŸãƒƒãƒˆãƒ»ãƒ—ãƒƒã‚·ãƒ¥
 git add .
 git commit -m "Integrate Supabase + Vercel + Vue3"
 git push origin <your-branch>
 
 ä»¥ä¸ŠãŒä¸€é€£ã®æµã‚Œã§ã™ã€‚

  Supabaseï¼šãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆãƒ»ç’°å¢ƒå¤‰æ•°å–å¾—
  ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºï¼š.env ä½œæˆ â†’ vercel dev ã§ Vite/Vercel Functions èµ·å‹• â†’ 
   curl ã§å‹•ä½œç¢ºèª â†’ Supabase ã§å€¤ã‚’ãƒã‚§ãƒƒã‚¯
  Vue 3ï¼šGameStats.vue ã‚’ä½œã‚Šã€GameList.vue ã«çµ„ã¿è¾¼ã‚€
  Vercelï¼švercel.json ã‚’ç”¨æ„ â†’ GitHub Push ã§è‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤
  GitHub Pagesï¼ˆå¿…è¦ãªå ´åˆï¼‰ï¼šnpm run deploy ã§é™çš„ãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°

ã“ã®æ‰‹é †ã‚’é †ç•ªã«å®Ÿè¡Œã™ã‚Œã°ã€ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºã‹ã‚‰ã‚¯ãƒ©ã‚¦ãƒ‰é€£æºã€æœ¬ç•ªå…¬é–‹ã¾ã§ã‚¹ãƒ ãƒ¼ã‚ºã«å‹•ä½œã™ã‚‹ã¯ãšã§ã™ã€‚
ã”å‚è€ƒã«ãªã‚Œã°å¹¸ã„ã§ã™ã€‚


--------------------------------

ä»Šå›ã®ãƒã‚¤ãƒ³ãƒˆã‚’ã–ã£ãã‚ŠãŠã•ã‚‰ã„
1.vite.config.ts ã§ãƒãƒ¼ãƒˆã‚’å›ºå®šã—ãªã„

// æ‚ªã„ä¾‹: port: 5173 ã¨ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‰ã—ã¦ã—ã¾ã†ã¨ã€vercel dev ã¨è¡çªã™ã‚‹
server: {
  port: 5173,
  strictPort: true,
  //â€¦
}
// â†“
// è‰¯ã„ä¾‹: process.env.PORT ãŒã‚ã‚Œã°ãã‚Œã‚’å„ªå…ˆã—ã¦ä½¿ã„ã€ãªã‘ã‚Œã° 5173
server: {
  port: Number(process.env.PORT) || 5173,
  strictPort: true,
}
ã“ã‚Œã«ã‚ˆã‚Šã€
å˜ç‹¬ã§ npm run dev â†’ ãƒ•ãƒ­ãƒ³ãƒˆã¯ 5173 ã§èµ·å‹•

npx vercel devï¼ˆã¾ãŸã¯ npx vercel dev --listen 3000ï¼‰â†’ Vercel Dev ãŒæ¸¡ã™ PORT=3000 ã‚’å—ã‘ã¦ã€ãƒ•ãƒ­ãƒ³ãƒˆã‚‚ 3000 ã§èµ·å‹•ã—ã€API ã¸ã®ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã¯è‡ªå‹•çš„ã« Functions å´ã¸å§”è­²
ã¨ã„ã†ãƒ•ãƒ­ãƒ¼ãŒæˆã‚Šç«‹ã¤ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

ãƒ­ãƒ¼ã‚«ãƒ«ã§ã®å‹•ä½œç¢ºèªæ‰‹é †
ç«¯æœ«A ã§ npm run dev ã‚’èµ°ã‚‰ã›â†’ http://localhost:5173 ã§ãƒ•ãƒ­ãƒ³ãƒˆãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
ç«¯æœ«B ã§ npx vercel dev --listen 3000 ã‚’èµ°ã‚‰ã›â†’ http://localhost:3000/api/get-count?... ãªã©ã§ API ãŒå‹•ã„ã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèª
ã“ã®ä¸¡è€…ãŒãã‚Œãã‚Œæ­£å¸¸ã«å‹•ãã¨ã‚ã‹ã£ãŸã‚‰ã€æ”¹ã‚ã¦ ç«¯æœ«A ã§ npx vercel dev ã‚’ä¸€ç™ºã§èµ·å‹•ã—â†’ http://localhost:3000 ã§ã€Œãƒ•ãƒ­ãƒ³ãƒˆï¼‹APIã€ãŒã¾ã¨ã‚ã¦èµ·å‹•ã™ã‚‹ã“ã¨ã‚’ç¢ºã‹ã‚ã‚‹

CORSï¼import-analysis å‘¨ã‚Šã®å¾®èª¿æ•´
assetsInclude: ['**/*.html'] ã‚’è¨­å®šã—ã¦ãŠãã“ã¨ã§ã€Vite ãŒ index.html ã‚’ã‚¢ã‚»ãƒƒãƒˆã¨ã—ã¦æ­£ã—ãæ‰±ã„ã€
import-analysis ã‚¨ãƒ©ãƒ¼ã‚„ 500 ã‚¨ãƒ©ãƒ¼ã‚’é˜²ãã¾ã™ã€‚

ãƒ•ãƒ­ãƒ³ãƒˆã‹ã‚‰ã® /api/... ãƒªã‚¯ã‚¨ã‚¹ãƒˆã¯ã™ã¹ã¦ VITE_API_BASEï¼ˆé–‹ç™ºç’°å¢ƒæ™‚ã¯ http://localhost:3000ï¼‰ã‚’å…ˆé ­ã«ä»˜ã‘ã‚‹ã“ã¨ã§ã€
Axios ã®å‘¼ã³å‡ºã—å…ˆãŒæ­£ã—ã Functions ã«å±Šãã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

ä»Šå›ã®ä¸€é€£ã®ä¿®æ­£ã«ã‚ˆã£ã¦ã€ãƒ­ãƒ¼ã‚«ãƒ«ã§ã¯ã€Œ5173: ãƒ•ãƒ­ãƒ³ãƒˆã€ã€Œ3000: APIã€ãŒãã‚Œãã‚Œæ­£å¸¸ã«å‹•ä½œã—ã€ã•ã‚‰ã« npx vercel dev ã‚’ä¸€ç™ºã§å©ã„ã¦ã‚‚ä¸¡è€…ãŒã¶ã¤ã‹ã‚‰ãšã«å…±å­˜ã§ãã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚

æ¬¡ã«ã‚„ã‚‹ã“ã¨
æœ¬ç•ªç’°å¢ƒå‘ã‘ã«ãƒ‡ãƒ—ãƒ­ã‚¤
GitHub ãªã©ã«ã‚³ãƒŸãƒƒãƒˆï¼†ãƒ—ãƒƒã‚·ãƒ¥ã—ã¦ã€Vercel ã® Production ç’°å¢ƒã«ãƒãƒ¼ã‚¸ã™ã‚Œã°ã€è‡ªå‹•çš„ã«ãƒ“ãƒ«ãƒ‰ï¼†ãƒ‡ãƒ—ãƒ­ã‚¤ãŒå§‹ã¾ã‚Šã¾ã™ã€‚
æœ¬ç•ªã§ã¯ VITE_API_BASE ã¯ä¸è¦ï¼ˆFunctions ã¸ã®ç›¸å¯¾ãƒ‘ã‚¹ /api/... ãŒè‡ªå‹•çš„ã«æ­£ã—ã„å ´æ‰€ã‚’æŒ‡ã—ã¾ã™ï¼‰ã€‚
ç’°å¢ƒå¤‰æ•°ï¼ˆSUPABASE_URL ã¨ SUPABASE_KEYï¼‰ã¯ Vercel ã®ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã‹ã‚‰æœ¬ç•ªç”¨ã«ã‚‚è¨­å®šã—ã¦ãŠãã¾ã—ã‚‡ã†ã€‚

å‹•ä½œç¢ºèª
ãƒ‡ãƒ—ãƒ­ã‚¤å®Œäº†å¾Œã€å…¬é–‹URLï¼ˆä¾‹ï¼š https://<your-project>.vercel.appï¼‰ã«ãƒ–ãƒ©ã‚¦ã‚¶ã§ã‚¢ã‚¯ã‚»ã‚¹ã—ã€
ãƒ•ãƒ­ãƒ³ãƒˆå´ã® UI ãŒæ­£ã—ãè¡¨ç¤ºã•ã‚Œã‚‹
ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã«ãƒ“ãƒ¥ãƒ¼æ•°ãŒã‚«ã‚¦ãƒ³ãƒˆã‚¢ãƒƒãƒ—ã•ã‚Œã‚‹

ã„ã„ã­ãƒœã‚¿ãƒ³ã‚’æŠ¼ã™ã¨ Supabase ä¸Šã®å€¤ãŒï¼‹1 ã•ã‚Œã€ç”»é¢ã«ã‚‚åæ˜ ã•ã‚Œã‚‹
ã¨ã„ã†æµã‚Œã‚’å¿µã®ãŸã‚ãƒã‚§ãƒƒã‚¯ã—ã¦ãã ã•ã„ã€‚

å¿…è¦ã«å¿œã˜ãŸèª¿æ•´
è¿½åŠ ã—ãŸã„ã‚²ãƒ¼ãƒ ãŒã‚ã‚Œã° src/data/games.ts ã«è¿½è¨˜ã—ã¦ã€ãƒ“ãƒ«ãƒ‰ã‚’å›ã—ã¦ã¿ã‚‹

ãƒ‡ã‚¶ã‚¤ãƒ³ã‚„ UI ã®ç´°ã‹ã„èª¿æ•´
Supabase å´ã§èªè¨¼ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è¿½åŠ ã—ãŸã„ãƒ»ãƒ¬ãƒãƒ¼ãƒˆã‚’è¦‹ãŸã„ãªã©ãŒã‚ã‚Œã°ã€ãã®ã‚ãŸã‚Šã‚’æ‹¡å¼µ
ã‚‚ã—æœ¬ç•ªãƒ‡ãƒ—ãƒ­ã‚¤å¾Œã‚„åˆ¥ã®ãƒ•ã‚§ãƒ¼ã‚ºã§å•é¡Œã‚„è³ªå•ãŒå‡ºã¦ããŸã‚‰ã€ã¾ãŸãŠçŸ¥ã‚‰ã›ãã ã•ã„ã€‚ãŠç–²ã‚Œã•ã¾ã§ã—ãŸï¼

â˜…


